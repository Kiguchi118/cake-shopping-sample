<div class="box">
    <h3>ご自身の住所（<%= link_to "編集する", edit_user_path(@user) %>）</h3>
    〒<%= @user.postcode %>
    <%= @user.prefecture_name %>
    <%= @user.address_city %>
    <%= @user.address_street %>
    <%= @user.address_building %>
</div>

<h2>新規住所登録</h2>

<div class="form_container">
    <%= form_with(model: @new_address, local: true) do |f| %>
        <div class="box_account">
            <%= render 'shared/error_messages', object: f.object %>

            <div class="field">
                <%= f.label :postcode, "郵便番号", class: "form_label"%>
                <div class="form_post">
                    <%= f.text_field :postcode, maxlength: 7, autofocus: true, class: "form_input_post", placeholder: "例）1000001（ハイフンなし）" %>
                    <input type="button" id="btn" name="btn" value="住所を検索">
                </div>
            </div>

            <div class="field">
                <%= f.label :prefecture_name, "都道府県", class: "form_label" %>
                <%= f.collection_select :prefecture_name, JpPrefecture::Prefecture.all, :name, :name, include_blank: '選択してください' %>
            </div> 

            <div class="field">
                <%= f.label :address_city, "市町村", class: "form_label" %>
                <%= f.text_field :address_city, autofocus: true, class: "form_content", placeholder: "例）千代田区" %>   
            </div>

            <div class="field">
                <%= f.label :address_street, "番地", class: "form_label" %>
                <%= f.text_field :address_street, autofocus: true, class: "form_content", placeholder: "例）千代田1-1-1" %>   
            </div>

            <div class="field">
                <%= f.label :address_building, "建物名", class: "form_label" %>
                <%= f.text_field :address_building, autofocus: true, class: "form_content", placeholder: "建物名 部屋番号" %>   
            </div>

            <div class="actions">
                <%= f.submit "登録する" %>
            </div>

        </div>
    <% end %>
</div>

<% if @addresses.present? %>
    <h2>登録済み住所</h2>
    <% @addresses.each do |address| %>
        <div class="box">
            <div class="address">
                〒<%= address.postcode %>
                <%= address.prefecture_name %>
                <%= address.address_city %>
                <%= address.address_street %>
                <%= address.address_building %>
            </div>
            <div class="address-edit">
                <%= link_to "編集", edit_address_path(address) %>
                <%= link_to "削除", address, method: :delete %>
            </div>
        </div>
    <% end %>
<% end %>
